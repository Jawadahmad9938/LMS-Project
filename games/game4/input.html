<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Teacher Input</title>
  <style>
    body {
      font-family: sans-serif;
      max-width: 600px;
      margin: 30px auto;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 10px;
      background: #f9f9f9;
    }
    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }
    input, button {
      margin-top: 5px;
      width: 100%;
      padding: 8px;
    }
    button {
      margin-top: 20px;
      background: #007bff;
      color: white;
      font-size: 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h2>Darakoi - Teacher Panel</h2>

  <label>Upload Background Image</label>
  <input type="file" id="bgInput" accept="image/*">

  <label>Upload Object Image</label>
  <input type="file" id="objInput" accept="image/*">

  <label>Upload Click Sound</label>
  <input type="file" id="soundInput" accept="audio/*">

  <label>Total Objects</label>
  <input type="number" id="totalObjects" min="1" value="10">

  <label>Correct Objects</label>
  <input type="number" id="correctObjects" min="1" value="3">

  <label>Movement Speed (1-10)</label>
  <input type="number" id="speed" min="1" max="10" value="3">

  <button onclick="generateInputJSON()">Download input.json</button>

  <script>
    function generateInputJSON() {
      const bgFile = document.getElementById('bgInput').files[0];
      const objFile = document.getElementById('objInput').files[0];
      const sndFile = document.getElementById('soundInput').files[0];
      const total = +document.getElementById('totalObjects').value;
      const correct = +document.getElementById('correctObjects').value;
      const speed = +document.getElementById('speed').value;

      if (!bgFile || !objFile || !sndFile) {
        alert("Please upload all 3 files.");
        return;
      }

      const inputData = {
        background: { name: bgFile.name },
        objectImage: { name: objFile.name },
        clickSound: { name: sndFile.name },
        totalObjects: total,
        correctObjects: correct,
        speed
      };

      const blob = new Blob([JSON.stringify(inputData, null, 2)], {
        type: "application/json"
      });

      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "input.json";
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);

     
    }

    // Access game-specific data
    const gameData = window.parent.currentGameData || { letters: ['A', 'B', 'C'] };
    document.getElementById('gameContent').textContent = `Match these letters: ${gameData.letters?.join(', ') || 'No data'}`;

    function completeGame() {
      window.parent.postMessage({ type: 'gameComplete', score: 90 }, '*');
    }
  </script>
</body>
</html>
